version: "1.0"
name: "Backend API Feature"
description: "Standard tasks for backend API development"
author: "Atomize"
tags: ["backend", "api", "standard"]

# Filter to identify applicable User Stories
filter:
  workItemTypes:
    - "User Story"
    - "Product Backlog Item"
  states:
    - "New"
    - "Approved"
    - "Active"
  tags:
    include:
      - "backend"
      - "api"
  excludeIfHasTasks: true

# Task template with estimation percentages
tasks:
  - id: "design-api"
    title: "Design API Specification"
    description: |
      Design RESTful API endpoints following company standards:
      - Define request/response models
      - Document in OpenAPI/Swagger
      - Review with team architect
    estimationPercent: 10
    tags: ["design", "api"]
    activity: "Design"

  - id: "database-schema"
    title: "Database Schema Changes"
    description: |
      Design and implement database changes:
      - Create/update migrations
      - Define models and relationships
      - Index optimization
    estimationPercent: 20
    tags: ["database", "backend"]
    activity: "Development"

  - id: "implement-logic"
    title: "Implement Business Logic"
    description: |
      Core API implementation:
      - Implement service layer
      - Add validation logic
      - Error handling
      - Logging
    estimationPercent: 35
    tags: ["implementation", "backend"]
    activity: "Development"
    dependsOn:
      - "design-api"
      - "database-schema"

  - id: "unit-tests"
    title: "Unit & Integration Tests"
    description: |
      Comprehensive test coverage:
      - Unit tests (80%+ coverage)
      - Integration tests
      - Mock external dependencies
    estimationPercent: 20
    tags: ["testing", "quality"]
    activity: "Testing"
    dependsOn:
      - "implement-logic"

  - id: "documentation"
    title: "API Documentation"
    description: |
      Update documentation:
      - API endpoint documentation
      - Update README
      - Code comments
      - Postman collection
    estimationPercent: 5
    tags: ["documentation"]
    activity: "Documentation"

  - id: "code-review"
    title: "Code Review & Refinement"
    description: |
      Review and refine:
      - Create pull request
      - Address review feedback
      - Final testing
    estimationPercent: 10
    tags: ["review", "quality"]
    activity: "Design"

# Estimation strategy
estimation:
  strategy: "percentage"
  source: "Microsoft.VSTS.Scheduling.StoryPoints"
  rounding: "nearest"
  minimumTaskPoints: 0.5

# Validation rules
validation:
  totalEstimationMustBe: 100
  minTasks: 4
  maxTasks: 10

# Metadata
metadata:
  category: "Backend Development"
  difficulty: "intermediate"
  recommendedFor:
    - "API features"
    - "Microservices"
    - "Backend services"
  estimationGuidelines: |
    Use this template for stories sized 3-13 points.
    For larger stories, consider breaking down first.
  examples:
    - "User authentication API"
    - "Payment processing endpoint"
    - "Data export service"